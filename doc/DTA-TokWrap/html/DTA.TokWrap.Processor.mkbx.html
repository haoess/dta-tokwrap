<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>DTA::TokWrap::Processor::mkbx - DTA tokenizer wrappers: -&gt; bxdata</title>
<link rel="stylesheet" href="dtatw.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" valign="middle">
<big><strong><span class="block">&nbsp;DTA::TokWrap::Processor::mkbx - DTA tokenizer wrappers: -&gt; bxdata</span></strong></big>
</td></tr>
</table>


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#constants">Constants</a></li>
		<li><a href="#constructors_etc_">Constructors etc.</a></li>
		<li><a href="#methods__mkbx__bx0doc__txfile_____bxdata">Methods: mkbx (bx0doc, txfile) =&gt; bxdata</a></li>
	</ul>

	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright_and_license">COPYRIGHT AND LICENSE</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>DTA::TokWrap::Processor::mkbx - DTA tokenizer wrappers: (bx0doc,tx) -&gt; bxdata</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
 use DTA::TokWrap::Processor::mkbx;
 
 $mbx = DTA::TokWrap::Processor::mkbx-&gt;new(%opts);
 $doc_or_undef = $mbx-&gt;mkbx($doc);</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>DTA::TokWrap::Processor::mkbx provides an object-oriented
<a href="DTA.TokWrap.Processor.html">DTA::TokWrap::Processor</a> wrapper
for the creation of in-memory serialized text-block-indices.</p>
<p>Most users should use the high-level
<a href="DTA.TokWrap.html">DTA::TokWrap</a> wrapper class
instead of using this module directly.</p>
<p>
</p>
<h2><a name="constants">Constants</a></h2>
<dl>
<dt><strong><a name="_isa" class="item">@ISA</a></strong></dt>

<dd>
<p>DTA::TokWrap::Processor::mkbx
inherits from
<a href="DTA.TokWrap.Processor.html">DTA::TokWrap::Processor</a>.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="constructors_etc_">Constructors etc.</a></h2>
<dl>
<dt><strong><a name="new" class="item">new</a></strong></dt>

<dd>
<pre>
 $obj = $CLASS_OR_OBJECT-&gt;new(%args);</pre>
<p>Constructor.</p>
<p>%args, %$obj:</p>
<pre>
 ##-- Block-sorting: hints
 wbStr =&gt; $wbStr,                   ##-- word-break hint text
 sbStr =&gt; $sbStr,                   ##-- sentence-break hint text
 sortkey_attr =&gt; $attr,             ##-- sort-key attribute (default='dta.tw.key'; should jive with mkbx0)
 
 ##-- Block-sorting: low-level data
 xp    =&gt; $xml_parser,              ##-- XML::Parser object for parsing $doc-&gt;{bx0doc}</pre>
</dd>
<dt><strong><a name="defaults" class="item">defaults</a></strong></dt>

<dd>
<pre>
 %defaults = CLASS-&gt;defaults();</pre>
<p>Static class-dependent defaults.</p>
</dd>
<dt><strong><a name="init" class="item">init</a></strong></dt>

<dd>
<pre>
 $mbx = $mbx-&gt;init();</pre>
<p>Dynamic object-dependent defaults.</p>
</dd>
<dt><strong><a name="initxmlparser" class="item">initXmlParser</a></strong></dt>

<dd>
<pre>
 $xp = $mbx-&gt;initXmlParser();</pre>
<p>Create &amp; initialize $mbx-&gt;{xp}, an XML::Parser object
used to parse $doc-&gt;{bx0data}.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="methods__mkbx__bx0doc__txfile_____bxdata">Methods: mkbx (bx0doc, txfile) =&gt; bxdata</a></h2>
<dl>
<dt><strong><a name="mkbx" class="item">mkbx</a></strong></dt>

<dd>
<pre>
 $doc_or_undef = $CLASS_OR_OBJECT-&gt;mkbx($doc);</pre>
<p>Creates the serialized text-block-index $doc-&gt;{bxdata}
for the
<a href="DTA.TokWrap.Document.html">DTA::TokWrap::Document</a> object $doc.</p>
<p>Relevant %$doc keys:</p>
<pre>
 bx0doc  =&gt; $bx0doc,  ##-- (input) preliminary block-index data (XML::LibXML::Document)
 txfile  =&gt; $txfile,  ##-- (input) raw text index filename
 bxdata  =&gt; \@blocks, ##-- (output) serialized block index
 ##
 mkbx_stamp0 =&gt; $f,   ##-- (output) timestamp of operation begin
 mkbx_stamp  =&gt; $f,   ##-- (output) timestamp of operation end
 bxdata_stamp =&gt; $f,  ##-- (output) timestamp of operation end</pre>
<p>Block data: @{$doc-&gt;{bxdata}} = @blocks = ($blk0, ..., $blkN); %$blk =</p>
<pre>
 key    =&gt; $sortkey, ##-- (inherited) sort key
 elt    =&gt; $eltname, ##-- element name which created this block
 xoff   =&gt; $xoff,    ##-- XML byte offset where this block run begins
 xlen   =&gt; $xlen,    ##-- XML byte length of this block (0 for hints)
 toff   =&gt; $toff,    ##-- raw-text (.tx) byte offset where this block run begins
 tlen   =&gt; $tlen,    ##-- raw-text (.tx) byte length of this block (0 for hints)
 otext  =&gt; $otext,   ##-- output text (.txt) for this block
 otoff  =&gt; $otoff,   ##-- output text (.txt) byte offset where this block run begins
 otlen  =&gt; $otlen,   ##-- output text (.txt) length (bytes)</pre>
</dd>
<dt><strong><a name="prune_empty_blocks" class="item">prune_empty_blocks</a></strong></dt>

<dd>
<pre>
 \@blocks = $mbx-&gt;prune_empty_blocks(\@blocks);
 \@blocks = $mbx-&gt;prune_empty_blocks();</pre>
<p>Low-level utility.</p>
<p>Removes empty 'c'-type blocks from @blocks
(default=$mbx-&gt;{blocks}).</p>
</dd>
<dt><strong><a name="sort_blocks" class="item">sort_blocks</a></strong></dt>

<dd>
<pre>
 \@blocks = $mbx-&gt;sort_blocks(\@blocks);</pre>
<p>Low-level utility.</p>
<p>Sorts \@blocks (default=$mbx-&gt;{blocks})
using $mb-&gt;{key2i}.</p>
</dd>
<dt><strong><a name="compute_block_text" class="item">compute_block_text</a></strong></dt>

<dd>
<pre>
 \@blocks = $mbx-&gt;compute_block_text(\@blocks, \$txbuf);
 \@blocks = $mbx-&gt;compute_block_text(\@blocks);
 \@blocks = $mbx-&gt;compute_block_text();</pre>
<p>Low-level utility.</p>
<p>Sets $blk-&gt;{otoff}, $blk-&gt;{otlen}, $blk-&gt;{otext} for each block $blk
in @blocks (default=$mbx-&gt;{blocks}) by extracting
raw-text (.tx) substrings from \$txbuf (default=$mbx-&gt;{txbufr}).</p>
<p>\@blocks should already have been sorted before this method is called.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="DTA.TokWrap.Intro.html">DTA::TokWrap::Intro(3pm)</a>,
<a href="dta-tokwrap.perl.html">dta-tokwrap.perl(1)</a>,
...</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="DTA.TokWrap.Intro.html">DTA::TokWrap::Intro(3pm)</a>,
<a href="dta-tokwrap.perl.html">dta-tokwrap.perl(1)</a>,
...</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Bryan Jurish &lt;<a href="mailto:jurish@bbaw.de">jurish@bbaw.de</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="copyright_and_license">COPYRIGHT AND LICENSE</a></h1>
<p>Copyright (C) 2009-2014 by Bryan Jurish</p>
<p>This package is free software; you can redistribute it and/or modify
it under the same terms as Perl itself, either Perl version 5.14.2 or,
at your option, any later version of Perl 5 you may have available.</p>
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" valign="middle">
<big><strong><span class="block">&nbsp;DTA::TokWrap::Processor::mkbx - DTA tokenizer wrappers: -&gt; bxdata</span></strong></big>
</td></tr>
</table>

</body>

</html>
