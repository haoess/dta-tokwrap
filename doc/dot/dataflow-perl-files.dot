/* -*- Mode: C -*- */
digraph dataflow_perl_files {
  node [shape=rectangle,style=filled,fillcolor=pink,height=0.25,fontname="Courier"];
  edge [decorate=0,fontname="Courier"];

  xmlfile [label="xmlfile: *.xml",fillcolor=PowderBlue];

  mkindex [label="mkindex",shape=diamond,fillcolor=PaleGreen,fontname="Courier-Bold"];
  xmlfile -> mkindex;

  sxfile [label="sxfile: *.sx"];
  txfile [label="txfile: *.tx"];
  cxfile [label="cxfile: *.cx"];
  mkindex -> cxfile;
  mkindex -> sxfile;
  mkindex -> txfile;
  {rank=same; cxfile sxfile txfile}

  mkbx0 [label="mkbx0",shape=diamond,fillcolor=PaleGreen,fontname="Courier-Bold"];
  sxfile -> mkbx0;
 
  bx0file [label="bx0file: *.bx0"];
  mkbx0 -> bx0file;

  mkbx [label="mkbx",shape=diamond,fillcolor=PaleGreen,fontname="Courier-Bold"];
  bx0file -> mkbx;
  txfile  -> mkbx;

  bxfile [label="bxfile: *.bx"];
  txtfile [label="txtfile: *.txt"];
  mkbx -> bxfile;
  mkbx -> txtfile;
  {rank=same; bxfile txtfile}

  tokenize [label="tokenize(::dummy)",shape=diamond,fillcolor=PaleGreen,fontname="Courier-Bold",justify="left"];
  txtfile -> tokenize;

  tokfile [label="tokfile: *.t"];
  tokenize -> tokfile;
  //{rank=same; tokdata tokfile;}

  xtokfile [label="xtokfile: *.t.xml",fillcolor=PowderBlue];

  //-- tok2xml via c prog
  tok2xml[label="tok2xml",shape=diamond,fillcolor=PaleGreen,fontname="Courier-Bold"];
  bxfile -> tok2xml;
  cxfile -> tok2xml;
  tokfile -> tok2xml;
  tok2xml -> xtokfile;
  
  //-- standoff via C progs
  standoff [label="standoff",shape=diamond,fillcolor=PaleGreen,fontname="Courier-Bold"];
  xtokfile -> standoff;

  /*
    sofiles [label="sosfile: *.s.xml\nsowfile: *.w.xml\nsoafile: *.a.xml"];
    standoff -> sofiles;
  */

  sosfile [label="sosfile: *.s.xml",fillcolor=PowderBlue];
  sowfile [label="sowfile: *.w.xml",fillcolor=PowderBlue];
  soafile [label="soafile: *.a.xml",fillcolor=PowderBlue];
  standoff -> sosfile;
  standoff -> sowfile;
  standoff -> soafile;
  { rank=same; sosfile sowfile soafile; }

  //-- standoff: xsl stylesheets (now obsolete)
  /*
  standoff_xsl [label="t2s.xsl\nt2w.xsl\nt2a.xsl",fillcolor=orange];
  standoff -> standoff_xsl;
  */

  //-- splicint: external scripts
  add_w  [label="dtatw-add-w.perl",shape=diamond,fillcolor=orange,fontname="Courier-Bold"];
  sowfile -> add_w;
  xmlfile -> add_w;
  add_w  -> cwfile;
  cwfile [label="-cwfile: *.cw.xml",fillcolor=yellow];

  add_s  [label="dtatw-add-s.perl",shape=diamond,fillcolor=orange,fontname="Courier-Bold"];
  sosfile-> add_s;
  cwfile -> add_s;
  add_s  -> cwsfile;
  cwsfile [label="-cwsfile: *.cws.xml",fillcolor=yellow];
}
